function SubPostsChildManager(a){this.container=a,this.init=function(){this.bind(),this.makeSortable()},this.bind=function(){var a=this;jQuery(this.container).find(".pt_table_manage .trash a").bind("click",function(){a.delete_child(this)})},this.fixHelper=function(a,b){return b.children().each(function(){jQuery(this).width(jQuery(this).width())}),b},this.makeSortable=function(){var a=this,b=jQuery(this.container).find(".sortable tbody");b.sortable({helper:a.fixHelper,update:function(){jQuery("body").trigger("sp_sorting_childs",[b.sortable("toArray").toString()]),jQuery(a.container).parent().parent().find("h3").eq(0).append(jQuery("<img>").attr("src",jQuery("#sp-dir-img").val()+"ajax-loader.gif").addClass("sp_ajaxloader")),opts={url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"sp_item_sort",sp_items:b.sortable("toArray").toString(),nonce:jQuery(a.container).find("#sp-ajax-nonce").val()},success:function(){jQuery("body").trigger("sp_childs_sorted",[b.sortable("toArray").toString()]),jQuery(".sp_ajaxloader").remove()},error:function(){jQuery(".sp_ajaxloader").remove()}},jQuery.ajax(opts)}})},this.delete_child=function(a){jQuery("body").trigger("sp_delete_child",[jQuery(a).closest("tr").attr("id")]);var b=confirm(sp_js.confirm_delete_child);if(b){var c=this,d={url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"sp_delete_link",id:jQuery(a).closest("tr").attr("id"),nonce:jQuery(c.container).find("#sp-ajax-nonce").val()},success:function(){jQuery("body").trigger("sp_child_deleted",[jQuery(a).closest("tr").attr("id")]),jQuery(a).closest("tr").fadeTo("fast",0).slideUp(function(){jQuery(this).remove()})},error:function(){}};jQuery.ajax(d)}},this.init()}jQuery(function(a){a.each(a(".sp_mb_manage"),function(a,b){new SubPostsChildManager(b)})});